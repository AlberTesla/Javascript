<!DOCTYPE html>
<html>
    <head>
        <title>objects</title>
    </head>
    <body>
        <p>Rock Paper Scissors</p>
        <button onclick="
            func('rock');">Rock</button>
        <button onclick="
            func('paper');">Paper</button>
        <button onclick="
            func('scissors');">Scissors</button>
        <button onclick="
            resetScore();">Reset Score</button>
        <script>
            //local storage
            let score = JSON.parse(localStorage.getItem('score'));
            if (!score){
                score = {wins : 0, losses : 0, ties : 0};
            }

            console.log(score);

            let resetScore = function(){
                score['wins'] = 0;
                score['losses'] = 0;
                score['ties'] = 0;
                localStorage.removeItem('score');
            }

            let func = function(playerSelection){
                let computerMove = '';
                let computer = Math.random();
                if (computer <= 1/3){
                    computerMove = 'rock';
                }
                else if (computer > 1/3 && computer <= 2/3){
                    computerMove = 'paper';
                }
                else{
                    computerMove = 'scissors';
                }

                let status = '';
                if (computerMove === 'rock'){
                    if (playerSelection === 'rock'){
                        status = 'draw';
                    }
                    else if (playerSelection === 'paper'){
                        status = 'player';
                    }
                    else {
                        status = 'computer';
                    }
                }
                else if (computerMove === 'paper'){
                    if (playerSelection === 'rock'){
                        status = 'computer';
                    }
                    else if (playerSelection === 'paper'){
                        status = 'draw';
                    }
                    else {
                        status = 'player';
                    }
                }
                else {
                    if (playerSelection === 'rock'){
                        status = 'player';
                    }
                    else if (playerSelection === 'paper'){
                        status = 'computer';
                    }
                    else {
                        status = 'draw';
                    }
                }
                
                if (status === 'draw'){
                    score['ties']++;
                }
                else{
                    if (status == 'player'){
                        score['wins']++;
                    }
                    else {
                        score['losses']++;
                    }
                }

                localStorage.setItem('score', JSON.stringify(score));
                alert(`computer selected ${computerMove}\nplayer selected ${playerSelection}\n${status} won\n wins : ${score['wins']}, losses : ${score['losses']}, ties : ${score['ties']}`);
                return 'hello world';
            }
        </script>
    </body>
</html>